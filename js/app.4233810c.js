(function(t){function e(e){for(var s,r,o=e[0],l=e[1],c=e[2],u=0,p=[];u<o.length;u++)r=o[u],i[r]&&p.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("f841"),i=a.n(s);i.a},"0927":function(t,e,a){t.exports=a.p+"img/cdnbye.dc9dbe8f.png"},"0ce9":function(t,e,a){},"3cd7":function(t,e,a){"use strict";var s=a("0ce9"),i=a.n(s);i.a},"3f8c":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Header"),a("WebRTC"),a("Player")],1)},n=[],r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"site-header"},[s("nav",{staticClass:"navbar"},[s("div",{staticClass:"logo"},[s("a",{staticClass:"logo-link",attrs:{href:"/"}},[s("img",{attrs:{src:a("0927")}})])]),s("div",{staticClass:"banner"},[s("p",[t._v("Save Your Bandwidth using WebRTC")])]),s("div",{staticClass:"git"},[s("a",{attrs:{href:"https://github.com/cdnbye/hlsjs-p2p-engine",target:"_blank"}},[s("i",{staticClass:"fa fa-github fa-2x"})])])])])}],l={name:"Header"},c=l,d=(a("d791"),a("983a")),u=Object(d["a"])(c,r,o,!1,null,null,null);u.options.__file="Header.vue";var p=u.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rtc container"},[a("div",{staticClass:"webrtc"},[a("a",{ref:"link"},[t._v("WebRTC "),a("i",{ref:"icon"})])]),a("div",{staticClass:"blank"})])},h=[],v=(a("b54a"),{name:"WebRTC",mounted:function(){Hls.WEBRTC_SUPPORT?(this.$refs.icon.className="fa fa-check",this.$refs.link.style.backgroundColor="green"):(this.$refs.icon.className="fa fa-close",this.$refs.link.style.backgroundColor="red")}}),m=v,b=(a("cf1f"),Object(d["a"])(m,f,h,!1,null,"4030a010",null));b.options.__file="WebRTC.vue";var y=b.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("HLS-Player",{attrs:{playerData:this.statis},on:{onStats:t.onStats,onPeerID:t.onPeerID,onPeers:t.onPeers}}),a("Charts",{attrs:{lineData:t.lineData}})],1)},C=[],_=(a("28a5"),a("386d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"player container"},[a("div",{staticClass:"player-container"},[a("video",{staticClass:"video-js vjs-default-skin",attrs:{id:"player",controls:"",preload:"none"}},[a("source",{attrs:{src:this.statis.url,type:"application/x-mpegURL"}})])]),a("div",{staticClass:"player-statistics"},[a("div",{staticClass:"statis-item item-offload"},[a("span",{staticClass:"item-label"},[a("span",{staticClass:"item-label-data"},[t._v(t._s(t.statis.offload))]),t._v(" MB"),a("br"),a("span",{staticClass:"item-name offload"},[t._v("Offload")])])]),a("div",{staticClass:"statis-item item-ratio"},[a("span",{staticClass:"item-label"},[a("span",{staticClass:"item-label-data"},[t._v(t._s(t.statis.ratio))]),t._v(" %"),a("br"),a("span",{staticClass:"item-name ratio"},[t._v("P2P Ratio")])])]),a("div",{staticClass:"statis-item item-upload"},[a("span",{staticClass:"item-label"},[a("span",{staticClass:"item-label-data"},[t._v(t._s(t.statis.upload))]),t._v(" MB"),a("br"),a("span",{staticClass:"item-name upload"},[t._v("Upload")])])]),a("div",{staticClass:"statis-item item-rebuffers"},[a("span",{staticClass:"item-label"},[a("span",{staticClass:"item-label-data"},[t._v(t._s(t.statis.buffers))]),a("br"),a("span",{staticClass:"item-name rebuffers"},[t._v("Rebuffers")])])]),a("div",{staticClass:"statis-item item-peers"},[a("span",{staticClass:"item-label"},[a("span",{staticClass:"item-label-data"},[t._v(t._s(t.statis.peers))]),a("br"),a("span",{staticClass:"item-name peers"},[t._v("Peers")])])]),a("div",{staticClass:"statis-item item-peerid"},[a("span",{staticClass:"item-label"},[a("span",{staticClass:"item-label-data"},[t._v(t._s(t.p2pVersion))]),a("br"),a("span",{staticClass:"item-name peerid"},[t._v("Version")])])])]),a("div",{staticClass:"clear"}),a("div",{staticClass:"player-url"},[a("div",{staticClass:"player-input"},[a("input",{attrs:{type:"url",placeholder:this.statis.url},on:{change:t.inputChange}}),a("div",{staticClass:"player-play"},[a("a",{staticClass:"button",on:{click:t.playVideo}},[t._v("Play")])])]),a("div",{staticClass:"simulate"},[a("a",{staticClass:"button",on:{click:t.simulate}},[t._v("Simulate Peer")])])])])}),P=[],w={name:"HLS-Player",props:{playerData:{type:Object,required:!0,default:function(){return{url:"",offload:"0",ratio:"0",upload:"0",peers:"0",buffers:0,peerID:""}}}},data:function(){return{statis:{url:"",offload:"0",upload:"0",ratio:"0",peers:"0",buffers:0,peerID:""},p2pVersion:""}},watch:{playerData:{handler:function(t){this.statis=JSON.parse(JSON.stringify(t))},immediate:!0,deep:!0}},mounted:function(){var t=videojs("#player",{autoplay:!0,html5:{hlsjsConfig:{debug:!1,p2pConfig:{logLevel:!0}}}});this.p2pVersion=window.Hls.engineVersion,t.tech_.sourceHandler_.hls.p2pEngine.on("stats",this.$parent.onStats),t.tech_.sourceHandler_.hls.p2pEngine.on("peerId",this.$parent.onPeerID),t.tech_.sourceHandler_.hls.p2pEngine.on("peers",this.$parent.onPeers),t.tech_.on(Hls.Events.FRAG_LOADED,this.$parent.onFogLoaded),t.tech_.on(Hls.Events.ERROR,this.$parent.HLSerror)},methods:{simulate:function(){window.open("".concat(window.location.origin).concat(window.location.pathname,"?url=").concat(encodeURIComponent(this.statis.url)))},playVideo:function(){window.open("".concat(window.location.origin).concat(window.location.pathname,"?url=").concat(encodeURIComponent(this.statis.url)),"_self")},inputChange:function(t){this.statis.url=t.target.value}}},x=w,S=(a("6131"),Object(d["a"])(x,_,P,!1,null,null,null));S.options.__file="Player.vue";var D=S.exports,T=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},O=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",attrs:{id:"myChartWrap"}},[a("div",{attrs:{id:"lineId"}})])}],k=(a("c5f6"),a("6b54"),a("3eba")),H=a.n(k);a("ef97"),a("94b1"),a("b11c"),a("007d"),a("d28f");var E={name:"Charts",props:{lineData:{type:Object,required:!0,default:function(){return{series1:[],series2:[]}}}},data:function(){return{data:{series1:[],series2:[]}}},computed:{myChart:function(){return H.a.init(document.getElementById("lineId"))}},mounted:function(){var t=this;this.setSize(),window.onresize=function(){t.setSize()}},destroyed:function(){window.onresize=null},methods:{setSize:function(){var t=document.getElementById("myChartWrap").clientWidth,e=document.getElementById("myChartWrap").clientHeight;this.myChart.resize({width:t,height:e})},renderChart:function(){var t={legend:{orient:"vertical",left:"10%",top:"10%",icon:"circle"},color:["#12a5ed","red"],tooltip:{trigger:"axis",formatter:function(t){return 1===t.length?"P2P"===t[0].seriesName?'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#12a5ed;"></span>\n                P2P: '.concat(t[0].value," KB"):'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:red;"></span> \n                HTTP: '.concat(t[0].value," KB"):2===t.length?'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#12a5ed;"></span>\n                P2P: '.concat(t[0].value,' KB<br />\n                <span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:red;"></span> \n                HTTP: ').concat(t[1].value," KB"):void 0},textStyle:{align:"left"},axisPointer:{type:"line",lineStyle:{width:0}}},xAxis:{type:"category",data:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],boundaryGap:!1,axisTick:{show:!1},axisLabel:{formatter:function(){return""}}},yAxis:{type:"value",min:0,max:function(t){for(var e=t.max.toString(),a=Number(e[0])+1,s=1;s<e.length;s++)a+="0";return a},axisLabel:{formatter:"{value} KB"},axisTick:{show:!1}},grid:{top:"10%",bottom:"25%",left:66,right:50},series:[{type:"line",name:"P2P",showSymbol:!1,hoverAnimation:!1,areaStyle:{color:"#12a5ed"},lineStyle:{color:"#12a5ed"},smooth:!0,data:this.data.series2},{type:"line",name:"HTTP",showSymbol:!1,hoverAnimation:!1,areaStyle:{color:"red"},lineStyle:{color:"red"},smooth:!0,data:this.data.series1}]};this.myChart.setOption(t)}},watch:{lineData:{handler:function(t,e){this.data=JSON.parse(JSON.stringify(t)),this.renderChart()},deep:!0}}},R=E,j=(a("3cd7"),Object(d["a"])(R,T,O,!1,null,"336e1426",null));j.options.__file="Charts.vue";var $=j.exports,I="https://1257070836.vod2.myqcloud.com/0cf6732evodtransgzp1257070836/81fe3a525285890782510564774/v.f220.m3u8",B={name:"Player",beforeCreate:function(){var t=window.location.search;if(t){var e=t.split("?url=")[1];I=decodeURIComponent(e)}},data:function(){return{statis:{url:I,offload:"0",ratio:"0",upload:"0",peers:"0",buffers:0,peerID:""},lineData:{series1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],series2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}},components:{Charts:$,"HLS-Player":D},methods:{onStats:function(t){var e=t.totalHTTPDownloaded,a=void 0===e?0:e,s=t.totalP2PDownloaded,i=void 0===s?0:s,n=t.totalP2PUploaded,r=void 0===n?0:n,o=a+i;this.statis.ratio=Math.round(i/o*100),this.statis.offload=(i/1024).toFixed(2),this.statis.upload=(r/1024).toFixed(2)},onPeerID:function(t){this.statis.peerID=t},onPeers:function(t){this.statis.peers=t.length},onFogLoaded:function(t,e){var a=e.frag;!0===a.loadByHTTP||void 0===a.loadByHTTP?("HTTP",this.lineData.series1.push((a.loaded/1024).toFixed()),this.lineData.series2.push(0)):!0===a.loadByP2P&&("P2P",this.lineData.series2.push((a.loaded/1024).toFixed()),this.lineData.series1.push(0)),this.lineData.series1.shift(),this.lineData.series2.shift()},HLSerror:function(t,e){var a=Hls.ErrorDetails;switch(e.details){case a.BUFFER_STALLED_ERROR:this.statis.buffers++;break}}}},L=B,W=Object(d["a"])(L,g,C,!1,null,null,null);W.options.__file="Player.vue";var F=W.exports,A={name:"app",components:{Header:p,WebRTC:y,Player:F}},N=A,U=(a("034f"),Object(d["a"])(N,i,n,!1,null,null,null));U.options.__file="App.vue";var z=U.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(z)}}).$mount("#app")},"5c09":function(t,e,a){},6131:function(t,e,a){"use strict";var s=a("5c09"),i=a.n(s);i.a},bb6c:function(t,e,a){},cf1f:function(t,e,a){"use strict";var s=a("bb6c"),i=a.n(s);i.a},d791:function(t,e,a){"use strict";var s=a("3f8c"),i=a.n(s);i.a},f841:function(t,e,a){}});
//# sourceMappingURL=app.4233810c.js.map